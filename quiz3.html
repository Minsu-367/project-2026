<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>퀴즈 3</title>
  <style>
    body {
      font-family: "Noto Sans KR", sans-serif;
      background: #eaf6ff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .quiz-box {
      background: #ffffff;
      width: 750px;
      padding: 36px;
      border-radius: 24px;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      position: relative;
    }

    .quiz-number {
      color: #7b4ddb;
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 6px;
    }

    h2 {
      font-size: 19px;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .highlight {
      font-weight: bold;
      color: #ff6f00;
    }

    /* 노란 박스 */
    .play-box {
      background: #fff6cc;
      width: 100%;
      height: 300px;
      border-radius: 16px;
      position: relative;
      margin: 20px 0;
      overflow: hidden;
    }

    /* 산소 원자 */
    .atom {
      width: 70px;
      height: 70px;
      background: #ff6b6b;
      border-radius: 50%;
      position: absolute;
      cursor: grab;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      color: white;
      user-select: none;
    }

    .atom:active {
      cursor: grabbing;
    }

    #atom1 { top: 110px; left: 180px; }
    #atom2 { top: 110px; right: 180px; }

    /* 힌트 */
    .hint-area {
      display: none;
      margin-top: 12px;
      font-size: 15px;
      color: #555;
      text-align: center;
    }

    .hint-area::before {
      content: "⚠️ ";
      font-size: 18px;
      margin-right: 4px;
    }

    #result {
      display: none;
      position: absolute;
      top: 42%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 42px;
      font-weight: bold;
      color: #4caf50;
      background: #ffffff;
      padding: 20px 40px;
      border-radius: 20px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      z-index: 10;
    }

    .buttons {
      margin-top: 20px;
    }

    button {
      padding: 14px 28px;
      font-size: 18px;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      margin: 0 6px;
    }

    #nextBtn {
      background: #cccccc;
      color: white;
      cursor: not-allowed;
    }

    #nextBtn.active {
      background: #4caf50;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div class="quiz-box">
  <div class="quiz-number">3번 퀴즈.</div>

  <h2>
    박스 안에 산소 원자 2개가 있어.<br>
    산소 원자를 마우스로 클릭해서 옮겨
    <span class="highlight">‘우리가 숨을 쉴 수 있도록 해주는’</span>
    분자로 만들어 줘!
  </h2>

  <div class="play-box" id="playBox">
    <div class="atom" id="atom1">산소</div>
    <div class="atom" id="atom2">산소</div>
  </div>

  <div id="hint" class="hint-area">
    우리가 숨을 쉴 수 있도록 해주는 성질을 가진 입자는 산소 분자이며, 산소 원자 2개로 이루어졌어요.
  </div>

  <div class="buttons">
    <button id="nextBtn">다음</button>
  </div>

  <div id="result">정답!</div>
</div>

<script>
  const atoms = document.querySelectorAll(".atom");
  const result = document.getElementById("result");
  const nextBtn = document.getElementById("nextBtn");
  const hint = document.getElementById("hint");

  let isDragging = false;
  let offsetX = 0;
  let offsetY = 0;
  let activeAtom = null;
  let solved = false;

  /* ✅ 10초 후 힌트 표시 (정답 아닐 때만) */
  setTimeout(() => {
    if (!solved) {
      hint.style.display = "flex";
    }
  }, 10000);

  atoms.forEach(atom => {
    atom.addEventListener("mousedown", e => {
      isDragging = true;
      activeAtom = atom;
      offsetX = e.offsetX;
      offsetY = e.offsetY;
    });
  });

  document.addEventListener("mousemove", e => {
    if (!isDragging || !activeAtom || solved) return;

    const box = document.getElementById("playBox");
    const rect = box.getBoundingClientRect();

    const x = e.clientX - rect.left - offsetX;
    const y = e.clientY - rect.top - offsetY;

    activeAtom.style.left = `${x}px`;
    activeAtom.style.top = `${y}px`;

    checkCollision();
  });

  document.addEventListener("mouseup", () => {
    isDragging = false;
    activeAtom = null;
  });

  function checkCollision() {
    const a1 = document.getElementById("atom1").getBoundingClientRect();
    const a2 = document.getElementById("atom2").getBoundingClientRect();

    const distance = Math.hypot(
      a1.left - a2.left,
      a1.top - a2.top
    );

    if (distance < 60 && !solved) {
      solved = true;

      hint.style.display = "none";   // ⭐ 힌트가 떠 있었다면 숨김
      showResult();
    }
  }

  function showResult() {
    result.style.display = "block";
    nextBtn.classList.add("active");
  }

  nextBtn.addEventListener("click", () => {
    if (nextBtn.classList.contains("active")) {
      window.location.href = "quiz4.html";
    }
  });
</script>


</body>
</html>
